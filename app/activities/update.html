
<!--Content-->
<section id="signup" style="padding-top: 0" ng-init="init()">
<div id="myModal"
     class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">{{activity.comment}}</h4>
      </div>
      <div class="modal-body">
        <div>
          <img class="center"  
               height="500" 
               width="500"
               ng-src="{{getPhoto()}}"></img>
          <span ng-show="hasFile($index)"> 
            <br>
            <strong style="vertical-align: top">Listen:</strong>
            <audio ng-attr-src="{{activity.file._url}}" controls preload></audio> 
          </span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

  <div class="container">
    <div class="row margin-40">
      <div class="col-sm-6 col-sm-offset-3 signup">
        <h3>Question</h3><br />
        <form id="roleForm" 
              novalidate="" 
              name="roleForm"
              class="form-horizontal">
         
          <!-- Question --------------------------------------->
          <div class="control-group">
            <div class="controls">
              <div class="input-prepend">
                <span class='fv-label'>Below is your question</span>
                <br>
          	<textarea
                   ng-disabled="!activity.hasWriteAccess() || isRecording()"
                   ng-model="activity.comment"
                   class="input-xlarge" 
                   id="comment" 
                   name="comment"
                   required
                   ng-minlength=10
                   ng-maxlength=250
                   rows=5
                   cols=50
                   placeholder="Question">
                </textarea>
              </div>
            </div>
          </div>

          <div class="fv-warning" 
               ng-show="roleForm.comment.$invalid &&
                        roleForm.submitted">
            A question should be between 10 and 250 characters.
          </div>
          <!---- Image -------------------------------------------------->          
          <div class="control-group">
            <div class="controls">
              <div class="input-prepend">
                <span class='fv-label' style="margin-right: 43px">Photo</span>
          	<span class="add-on">
                  <i class="fa fa-picture-o">
                  </i>
                </span>
                <input type="file" 
                       id="fileToUpload"
                       name="fileToUpload"
                       ng-model="photo"
                       validfilesize
                       validfiletype
                       onchange="angular.element(this).scope().setFiles(this)">
              </div>
            </div>
          </div>
         <span class='fv-warning'
                ng-show="roleForm.fileToUpload.$error.validfiletype">
           Image must be of jpg, gif or png type.
           <br>
          </span>

          <span class='fv-warning'
                ng-show="roleForm.fileToUpload.$error.validfilesize">
            Image size must be less the 2M!
            <br>
          </span>

          <span class='fv-warning'
                ng-show="roleForm.fileToUpload.$error.validfilesize
                         && roleForm.submitted">
            Please choose another image.
          </span>
          <!---- Current Imaage -------------------------------------------------->          
          <div ng-if="getThumbnail()" class="control-group">
            <div class="controls">
              <div class="input-prepend">
                <span class='fv-label account-label' style="display:none">Current</span>
          	<span class="add-on" style="display:none">
                  <i class="fa fa-picture-o">
                  </i>
                </span>
                <div class='account-thumbnail'>
                  <img ng-click="showPicture()"
                       ng-src="{{getThumbnail()}}"></img>
                </div>
              </div>
            </div>
          </div>

          <!--  Recording buttons ------------------------------->
          <span ng-show="isRecording()">
            <div  class="control-group">
              <div class="controls">
                <div class="input-prepend">
                  <span ng-show="!recording"
                        class='fv-label'>
                    Press the Record button to record your story.<br>
                    You have 30 seconds of recording time.
                  </span>
                  <span ng-show="recording"
                        class='fv-label'>
                    Press the Stop button to end  your recording.
                  </span>
                  
                  <div class="buttonContainer">
                    <strong  style="vertical-align: top">Record:</strong>	
                    <div class="recordingButtons">
                      <!-- recording button -->
                      <span ng-click="beginRecording()"
                            ng-disabled="recording">
                        <i id="startRecording" class="fa fa-play fa-lg"></i>
                      </span>
                      <!-- recording button -->
                      <span ng-click="stopRecording()"
                            ng-disabled="!recording">
                        <i id="stopRecording" class="fa fa-stop fa-lg"></i>
                      </span>
                      <timer interval="1000"
                             id='myTimer'
                             countdown="30" 
                             autostart="false">
                        <div class="progress">
                          <div class="progress-bar {{progressBar}}" 
                               role="progressbar"
                               style="width: {{((30-seconds)/30)*100}}%;">
                          </div> 
                        </div>
                        <span class="timerSeconds">0:{{30 - seconds | secondsFilter}}</span>
                      </timer>

                    </div><!-- recordingButtons -->
                  </div><!--button container-->
                </div>
              </div>
            </div>
          </span>

          <!-- File ------------------------------------------>
           <div  ng-show="hasFile()">
             <div class="control-group">
               <div class="controls">
                 <div class="input-prepend">
                     <br>
                     <strong style="vertical-align: top">Listen:</strong>
                     <audio ng-attr-src="{{activity.file._url}}" controls preload></audio> 
                 </div>
               </div>
             </div>
           </div>

          <!-- Submit ------------------------------------------>
          <div ng-show="activity.hasWriteAccess()  && !isRecording()">
            <div class="control-group">
              <div class="controls">
                <button type="submit" 
                        ng-click="submit()"
                        class="btn-main">
                  <i class="fa fa-sign-in"></i>
                  Submit
                </button>
              </div>
            </div>
          </div>
          <div ng-show="!activity.hasWriteAccess()  || isRecording()">
            <div class="control-group">
              <div class="controls">
                <button
                   id="submitBtn"
                   type="submit" 
                   ng-click="back()"
                   class="btn-main">
                  <i class="fa fa-arrow-circle-o-left"></i>
                  Return
                </button>
              </div>
            </div>
          </div>
          

        </form>
   

      </div> <!-- form -->
    </div><!--End Row-->
  </div><!--End Container-->
  
</section>



