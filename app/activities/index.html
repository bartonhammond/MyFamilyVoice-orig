<div ng-init="init()" class="clearfix" style="margin-bottom: 20px">
 <script type="text/ng-template" id="myModalContentActivities.html">
      <div class="modal-header">
        <button type="button" class="close" ng-click="ok()">&times;</button>
        <h4 class="modal-title">{{modalData.comment}}</h4>
      </div>
      <div class="modal-body">
        <div ng-show="modalData" >
          <img class="center"  
               width="500"
               ng-src="{{proxyUrl(modalData.photo)}}"/>
          <span ng-show="modalData.file">
            <div style="vertical-align: top">Listen:</div>
            <audio ng-click="listened()"
                   ng-attr-src="{{proxyUrl(modalData.file)}}"
                   controls preload></audio> 
          </span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="ok()">Close</button>
      </div>
</script>

  <div class="table-responsivie">
    <table class="table" style="margin-bottom: 0">
      <tr class="well well-sm">
        <td class="col-md-1">
          <img ng-src="{{proxyUrl(user.get('thumbnail'))}}"/>
        </td>
        <td class="col-md-11">
          <strong>Name:</strong> {{user.get('firstName')}}
          {{user.get('lastName')}}
          <span class="pull-right" 
                ng-if="doesUserHaveWriteAccess()">
            <button class="btn" ng-click="newQuestion()">New Question</button>
          </span>
          <br>
          Joined: {{user.createdAt | date:simple}}
          <br>
          Recordings: {{user.get('recordings')}}
          <br>
          Has listened to: {{user.get('viewed')}}
          <br>
          Has been heard: {{user.get('audioViews')}}
        </td>
      </tr>
    </table>
  </div>
</div>
<div class="table-responsive">
  <table class="table table-hover">
    <tr ng-repeat="activity in activities">
      <td class="col-md-1">
        <img ng-show="hasThumbnail($index)"
             ng-click="showModal($index)"
             style="cursor: pointer"
             ng-src="{{proxyUrl(activity.thumbnail)}}"/>
      </td>
      <td class="col-md-11">
        <a href 
           ng-click="showModal($index)">
          {{activity.comment}}
        </a>
        <span class="pull-right">
          <button ng-if="activity.hasWriteAccess($index)"
                  class="btn" 
                  ng-click="edit(activity)">Edit</button>
          <button ng-if="isOwner($index)"
                  class="btn" 
                  ng-click="record(activity)">Record</button>
          <button ng-if="activity.hasWriteAccess($index)"
                  class="btn" 
                  ng-click="delete(activity)">Delete</button>
        </span>          
        <span ng-show="hasFile($index)">
          <br>
          Recorded: {{activity.recordedDate | date: simple}}
        </span>
        <br>
        <span ng-show="hasFile($index)"> 
          <br>
          <audio ng-attr-src="{{proxyUrl(activity.file)}}" 
                 ng-click="listened(activity, $event)"
                 controls 
                 preload></audio> 
        </span>
        </span> 
        <span ng-show="activity.views">
          <br>
          Listened: {{activity.views}} times
        </span>
        <div class="likes-container">
          <span  ng-show="authenticated()">
            <a href>
              <span ng-show="activity.iLikeThis"
                    ng-click="like(activity, false)"
                    fv-tooltip="Click if you want to unlike">
                Unlike
              </span>
              <span ng-show="!activity.iLikeThis"
                    ng-click="like(activity, true)"
                    fv-tooltip="Click if you want to like this audio">
                Like
              </span>
            </a> 
          </span>
          <span style="float: right" >
            <span fv-tooltip="Click to see who likes this" >
              <i class="fa fa-thumbs-o-up fa-lg"
                 style="cursur: pointer"
                 ng-click="showLikes(activity)"></i>
                  {{activity.liked}}
            </span>
          </span>

	  <div collapse="activity.isLikeCollapsed">
            <br>
	    <div class="well well-sm">
              <span ng-repeat="user in activity.likes">
                <a ng-href="#/activities/list/{{user.id}}">
                  <strong>{{user.firstName}}
                    {{user.lastName}}</strong>
                  <span ng-if="!$last">, </span>
                </a>
              </span>
            </div> 
	  </div>
        </div>
      </td>
    </tr>
  </table>
</div>
